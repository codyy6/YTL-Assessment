# 2.3 You are tasked to build an application that can summarize long documents in both English and Malay.

How would you approach this problem? In your answer, cover:

1. Preprocessing steps you'd consider,
2. How you'd handle multilingual support (including possible code-switching),
3. The approach for summarization (extractive vs abstractive, model choice, or LLM usage),
4. How you would evaluate the quality of the summaries.

---

## Success Metrics

-   **Compression**: 10:1 to 20:1 ratios based on document type
-   **Fidelity**: Zero hallucinations, accurate representation of source
-   **Language balance**: Maintain appropriate distribution in code-switched content
-   **Latency**: Define sync vs async thresholds

## 1. Preprocessing Steps

**Ingestion**

-   Support PDF, DOCX, HTML, Markdown, plain text
-   Normalize UTF-8 encoding, remove boilerplate
-   Preserve structural metadata and source information

**Text Processing**

-   Language detection at sentence/paragraph level
-   Clean text, normalize punctuation
-   Tokenize using language-specific tokenizers (English/Malay)
-   Redact PII before processing

**Chunking**

-   Split into semantically coherent chunks with overlap
-   Compute multilingual embeddings per chunk
-   Store metadata: language, source, position

## 2. Multilingual Support (Including Code-Switching)

-   **Detection**: Identify language switches at segment level, tag appropriately
-   **Embeddings**: Use multilingual models (mBERT, multilingual sentence transformers) for cross-language retrieval
-   **Output control**: Support English, Malay, or preserve original distribution
-   **Preservation**: Maintain language tags throughout pipeline

## 3. Approach for Summarization

**Two-Stage Pipeline**

_Extractive stage:_

-   Score sentences using semantic similarity, position, frequency, centrality
-   Remove redundancy, select top content
-   Reduces hallucination by grounding in source

_Abstractive stage:_

-   Use multilingual LLMs (mT5, mBART) or fine-tuned seq2seq
-   Apply hierarchical summarization for long documents
-   Enforce constraints: language, length, factual grounding

**Prompting**

-   Template with language, compression, style, citation instructions
-   Few-shot examples for English, Malay, code-switched cases

**Post-processing**

-   Add citations to source chunks
-   Consistency checks, duplicate removal
-   Language-specific cleanup

## 4. Evaluation

-   **Automatic**: ROUGE (1/2/L), BERTScore per language
-   **Faithfulness**: Verify claims against source, flag hallucinations
-   **Human**: Bilingual evaluators assess quality, accuracy, coverage using Likert scales
-   **Regression**: Test suite with diverse document types, track metrics over time

# Frontend Planning

## User Interface

-   Drag-and-drop document upload zone supporting multiple file formats (PDF, DOCX, HTML, Markdown, TXT), if format is not accepted, then do not allow users to even select the file.
-   Document preview pane showing original text with language detection indicators
-   Side-by-side or tabbed view comparing original document and generated summary
-   Progress bar with stage indicators (uploading → preprocessing → extracting → summarizing → post-processing)
-   For long documents, show streaming summary generation in real-time to reduce perceived latency
-   Language toggle controls (Output Language: English / Malay / Preserve Original Distribution)
-   Summarization controls: compression ratio slider (10:1 to 20:1), summary style selector (concise/detailed)

## Document Management

-   Document library showing previously summarized documents with thumbnails and metadata
-   Search and filter by document type, language, upload date, or compression ratio
-   Batch processing queue for multiple documents
-   Export options: download summary as PDF, DOCX, TXT, or copy to clipboard

## Summarization Controls & Customization

-   Advanced options panel: toggle extractive/abstractive stages, adjust chunk overlap, semantic similarity threshold
-   Template selector for different use cases (executive summary, technical abstract, meeting notes)
-   Code-switching handling: option to separate or merge bilingual content in output
-   Custom length constraints: target word count or percentage of original
-   PII redaction toggle with visual indicators showing redacted content

## Feedbacks & Analytics

-   Calculate and display processing latency breakdown (upload → preprocessing → embedding → summarization)
-   User feedback widget: star rating (1-5) with specific dimensions (accuracy, coverage, coherence, language quality)
-   Quick feedback buttons: "Too short" / "Too long" / "Missing key points" / "Hallucination detected"
-   Side-by-side comparison tool to report specific issues (highlight problematic summary sections)
-   Analytics dashboard showing usage patterns, average compression ratios, language distribution, quality trends

## Performance

-   Lazy loading for very long summaries: paginate or infinite scroll with "Load more" sections
-   Progressive enhancement: show extractive summary first while abstractive summary is being generated
-   Optimize large file uploads: client-side compression, chunked uploads with resumability
-   Background prefetch for document library thumbnails and metadata
